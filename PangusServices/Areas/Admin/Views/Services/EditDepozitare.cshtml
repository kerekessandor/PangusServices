@model PangusServices.Models.Depozitare

@{
    ViewBag.Title = "Editare Depozitare";
}

@using(Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(x => x.DepozitareID)
    @Html.HiddenFor(x => x.IsDepozitare)
    @Html.HiddenFor(x => x.FirstName)
    @Html.HiddenFor(x => x.LastName)
    @Html.HiddenFor(x => x.NrInmatricuare)
    @Html.HiddenFor(x => x.Sfantu_Mciuc)
    
    <div class="row">

        <div class="form-group col-sm-3">
            <label>Data</label>
            @Html.TextBoxFor(x => x.Data, new { @class="form-control"})
        </div>

        <div class="form-group col-sm-3">
            <label>Marca anvelopa</label>
            @Html.DropDownList("AnvelopeID", null, new { @class = "form-control Anvelope" })
        </div>

        <div class="form-group col-sm-3">
            <label>Profil Anvelopa</label>
            @Html.DropDownList("ProfilID", null, new { @class = "form-control Profil" })
        </div>

        <div class="form-group col-sm-3">
            <label>Dimensiune A</label>
            @Html.TextBoxFor(x => x.Dimensiune, new { @class = "form-control" })
        </div>

        <div class="form-group col-sm-3">
            <label>Cantitate</label>
            @Html.TextBoxFor(x => x.Cantitate, new { @class = "form-control" })
        </div>
    </div>
    <div class="row">
        <div class="form-group col-sm-5">
            <label>Descriere</label>
            @Html.TextAreaFor(x => x.Descriere, new { @class = "form-control" })
        </div>
    </div>
    
    <input type="submit" value="Salvare" class="btn btn-primary" />
    <a href="@Url.Action("Details", new { id = ViewBag.backToDetails})" class="btn btn-default">Inapoi</a>
    
}

@section Scripts{
    <script>
        $('document').ready(function () {
            $(".Anvelope").change(function () {
                $(".Profil").empty();
                $.ajax({
                    type: 'POST',
                    url: '@Url.RouteUrl("SelectProfils")',
                    dataType: 'json',
                    data: { id: $(".Anvelope").val() },
                    success: function (profils) {
                        $.each(profils, function (i, profil) {
                            $(".Profil").append('<option value="'
                                + profil.ProfilID + '">'
                                + profil.Name + '</option>');
                        });
                    },
                    error: function (ex) {
                        alert('Failed to retrieve states.' + ex.responseText);
                    }
                });
                return false;
            })
        });
    </script>
}